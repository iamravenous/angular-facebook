"use strict";angular.module("Facebook",[]).provider("Facebook",function(){var o={},e="";this.config=function(t,n){o=t,e=n},this.$get=["$http","$rootScope","$q",function(t,n,r){if(angular.equals({},o))return console.error("No configuration!"),!1;if(!FB)return console.error("Facebook global not detected"),!1;var i,s=r.defer(),u=r.defer();return FB.init(o),FB.Event.subscribe("auth.authResponseChange",function(o){i.lastResponse=o,"connected"===o.status?(u=r.defer(),i.onLogin(o,s)):(s=r.defer(),i.onLogout(o,u)),n.$apply()}),i={login:function(){var o=r.defer();return i.lastResponse&&"connected"===i.lastResponse.status?(console.log("already logged in"),s.promise.then(function(){o.resolve()}),o.promise):(FB.login(function(e){s.promise.then(function(){o.resolve(i.lastResponse)},function(e){o.reject(e)})},{scope:e}),o.promise)},logout:function(){var o=r.defer();return FB.logout(function(e){u.promise.then(function(){o.resolve("Logged out")},function(){o.reject("Could not log out")})}),o.promise},onLogin:function(o,e){e.resolve(o)},onLogout:function(o,e){e.resolve(o)}},i.ui=FB.ui,i.api=FB.api,i}]}).filter("fbProfilePicture",[function(){return function(o,e){var t="https://graph.facebook.com/"+o+"/picture/";if(e){var n=e.split("x");t+="?",t+="width="+n[0],t+="&",t+="height="+n[1]}return t}}]).directive("fbComments",["$timeout",function(o){return{restrict:"A",scope:{href:"@fbComments",numposts:"@?"},template:'<div class="fb-comments" data-width="100%" data-href="{{::href}}" data-numposts="{{::numposts || 5}}" data-colorscheme="light"></div>',link:function(e,t,n){o(function(){console.log(e),FB.XFBML.parse(t[0])})}}}]);